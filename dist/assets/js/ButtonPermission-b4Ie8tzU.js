import{R as e,ac as t,as as s,ar as a,ae as o,af as i}from"./celerisComponents-DDKyWJ2G.js";import{_ as l}from"./CurrentPermissionMode.vue_vue_type_script_setup_true_lang-BTsGIAP0.js";import{b as n,d as r,c as d,u}from"./index-CBxHPOqU.js";import{_ as p}from"./Authority.vue_vue_type_script_setup_true_lang-DwlbVvQb.js";import{d as c,c as m,N as _,a3 as f,u as y,aa as g,R as x,Q as T,k as v,a6 as k,S as b,a9 as h,y as B,F as P}from"./vue-EUX_yFNd.js";const C=c({__name:"ButtonPermission",setup(c){const{hasPermission:C,isBackendPermissionMode:R}=n(),M=r(),j=d(),{t:A}=u(),S=m((()=>j.getRoleList.includes(e.ADMIN))),w=m((()=>j.getRoleList.includes(e.USER)));function I(e){return t=this,s=null,a=function*(){const t=`${e}FakeToken`;j.setToken(t),yield j.getUserInfoAction(),yield M.changePermissionCode()},new Promise(((e,o)=>{var i=e=>{try{n(a.next(e))}catch(t){o(t)}},l=e=>{try{n(a.throw(e))}catch(t){o(t)}},n=t=>t.done?e(t.value):Promise.resolve(t.value).then(i,l);n((a=a.apply(t,s)).next())}));var t,s,a}return(n,r)=>{const d=t,u=s,c=a,m=o,j=i,N=g("auth");return x(),_(d,{title:y(A)("page.permission.pageTitles.button")},{default:f((()=>[T(l),T(d,{class:"my-4",title:y(A)("page.permission.currentCode"),embedded:"",bordered:!1},{default:f((()=>[v(k(y(M).getPermissionCodes),1)])),_:1},8,["title"]),T(u),T(c,{class:"mt-4",type:"info",title:y(A)("page.permission.backendLeftMenuChangeTitle"),"show-icon":""},null,8,["title"]),T(u),T(d,{class:"mt-4",title:y(A)("page.permission.backendPermissionSwitchTitle"),embedded:"",bordered:!1},{default:f((()=>[T(j,null,{default:f((()=>[T(m,{type:y(S)?"primary":"default",disabled:!y(R),onClick:r[0]||(r[0]=t=>I(y(e).ADMIN))},{default:f((()=>[v(k(y(e).ADMIN),1)])),_:1},8,["type","disabled"]),T(m,{type:y(w)?"primary":"default",disabled:!y(R),onClick:r[1]||(r[1]=t=>I(y(e).USER))},{default:f((()=>[v(k(y(e).USER),1)])),_:1},8,["type","disabled"])])),_:1})])),_:1},8,["title"]),y(R)?(x(),b(P,{key:0},[T(u,null,{default:f((()=>[v(k(y(A)("page.permission.componentWayTitle")),1)])),_:1}),T(p,{value:"1000"},{default:f((()=>[T(m,{type:"primary",class:"mx-4"},{default:f((()=>[v(k(y(A)("page.permission.codeButtonText",{code:"1000"})),1)])),_:1})])),_:1}),T(p,{value:"2000"},{default:f((()=>[T(m,{type:"success",class:"mx-4"},{default:f((()=>[v(k(y(A)("page.permission.codeButtonText",{code:"2000"})),1)])),_:1})])),_:1}),T(p,{value:["1000","2000"]},{default:f((()=>[T(m,{type:"error",class:"mx-4"},{default:f((()=>[v(k(y(A)("page.permission.codeButtonText",{code:["1000","2000"]})),1)])),_:1})])),_:1}),T(u,null,{default:f((()=>[v(k(y(A)("page.permission.functionWayTitle")),1)])),_:1}),y(C)("1000")?(x(),_(m,{key:0,type:"primary",class:"mx-4"},{default:f((()=>[v(k(y(A)("page.permission.codeButtonText",{code:"1000"})),1)])),_:1})):h("",!0),y(C)("2000")?(x(),_(m,{key:1,type:"success",class:"mx-4"},{default:f((()=>[v(k(y(A)("page.permission.codeButtonText",{code:"2000"})),1)])),_:1})):h("",!0),y(C)(["1000","2000"])?(x(),_(m,{key:2,type:"error",class:"mx-4"},{default:f((()=>[v(k(y(A)("page.permission.codeButtonText",{code:["1000","2000"]})),1)])),_:1})):h("",!0),T(u,null,{default:f((()=>[v(k(y(A)("page.permission.directiveWayTitle")),1)])),_:1}),B((x(),_(m,{type:"primary",class:"mx-4"},{default:f((()=>[v(k(y(A)("page.permission.codeButtonText",{code:"1000"})),1)])),_:1})),[[N,"1000"]]),B((x(),_(m,{type:"success",class:"mx-4"},{default:f((()=>[v(k(y(A)("page.permission.codeButtonText",{code:"2000"})),1)])),_:1})),[[N,"2000"]]),B((x(),_(m,{type:"error",class:"mx-4"},{default:f((()=>[v(k(y(A)("page.permission.codeButtonText",{code:["1000","2000"]})),1)])),_:1})),[[N,["1000","2000"]]])],64)):h("",!0)])),_:1},8,["title"])}}});export{C as default};
