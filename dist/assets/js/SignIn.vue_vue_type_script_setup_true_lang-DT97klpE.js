var e=Object.defineProperty,a=Object.defineProperties,r=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,t=(a,r,o)=>r in a?e(a,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[r]=o;import{d as n,q as i,r as p,R as u,N as c,a3 as g,Q as d,u as m,af as f,U as w,k as v,a6 as y}from"./vue-EUX_yFNd.js";import{ao as b,aJ as h,ap as j,aK as O,aL as _,ae as P,aM as k}from"./celerisComponents-DDKyWJ2G.js";import{u as x,c as M}from"./index-CBxHPOqU.js";const z={class:"flex flex-col items-end gap-6"},q={class:"flex justify-between w-full"},C={class:"w-full"},K=n({__name:"SignIn",emits:["forgot-password"],setup(e,{emit:n}){const K=n,{t:S}=x(),U=b(),B=h(),D=i({username:"kirklin",password:"123456"}),I=i({username:[{required:!0,message:S("page.login.form.username.error"),trigger:"blur"}],password:[{required:!0,message:S("page.login.form.password.error"),trigger:"blur"}]}),N=p(!1),R=p();function A(e){return n=this,i=null,p=function*(){var n,i,p;e.preventDefault();try{yield null==(n=R.value)?void 0:n.validate(),N.value=!0;try{const e=yield M().login((i=((e,a)=>{for(var r in a||(a={}))l.call(a,r)&&t(e,r,a[r]);if(o)for(var r of o(a))s.call(a,r)&&t(e,r,a[r]);return e})({},m(D)),p={remember:!0,errorMessageMode:"none"},a(i,r(p))));e&&B.success({title:S("page.login.notification.loginSuccessMessage"),content:S("page.login.notification.welcomeBackMessage",{username:e.fullName})})}catch(u){U.error(S("page.login.form.incorrectAccountOrPassword"))}}finally{N.value=!1}},new Promise(((a,r)=>{var o=a=>{try{s(p.next(a))}catch(e){r(e)}},l=a=>{try{s(p.throw(a))}catch(e){r(e)}},s=e=>e.done?a(e.value):Promise.resolve(e.value).then(o,l);s((p=p.apply(n,i)).next())}));var n,i,p}return(e,a)=>{const r=j,o=O,l=_,s=P,t=k;return u(),c(t,{ref_key:"loginFormRef",ref:R,model:m(D),rules:m(I)},{default:g((()=>[d(o,{path:"username",label:m(S)("page.login.form.username.label")},{default:g((()=>[d(r,{value:m(D).username,"onUpdate:value":a[0]||(a[0]=e=>m(D).username=e),placeholder:m(S)("page.login.form.username.placeholder"),size:"large",autocomplete:"on",onKeydown:f(A,["enter"])},null,8,["value","placeholder"])])),_:1},8,["label"]),d(o,{path:"password",label:m(S)("page.login.form.password.label")},{default:g((()=>[d(r,{value:m(D).password,"onUpdate:value":a[1]||(a[1]=e=>m(D).password=e),type:"password",placeholder:m(S)("page.login.form.password.placeholder"),"show-password-on":"click",autocomplete:"on",size:"large",onKeydown:f(A,["enter"])},null,8,["value","placeholder"])])),_:1},8,["label"]),w("div",z,[w("div",q,[d(l,{size:"large"},{default:g((()=>[v(y(m(S)("page.login.form.remember")),1)])),_:1}),d(s,{text:"",type:"primary",onClick:a[2]||(a[2]=e=>K("forgot-password"))},{default:g((()=>[v(y(m(S)("page.login.form.forgetPassword")),1)])),_:1})]),w("div",C,[d(s,{type:"primary",loading:m(N),class:"w-full!",size:"large",onClick:A},{default:g((()=>[v(y(m(S)("page.login.form.loginButton")),1)])),_:1},8,["loading"])])])])),_:1},8,["model","rules"])}}});export{K as _};
