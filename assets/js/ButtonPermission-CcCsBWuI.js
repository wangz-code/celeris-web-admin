import{R as e,ac as t,as as s,ar as a,ae as o,af as i}from"./celerisComponents-DDKyWJ2G.js";import{_ as l}from"./CurrentPermissionMode.vuevuetypescriptsetuptruelang-TnwmTEma.js";import{b as n,d as r,c as d,u}from"./index-C0b3zp8b.js";import{_ as p}from"./Authority.vuevuetypescriptsetuptruelang-FlzLsCFs.js";import{d as c,c as m,N as f,a3 as y,u as g,aa as _,R as x,Q as T,k as v,a6 as k,S as b,a9 as h,y as B,F as P}from"./vue-EUX_yFNd.js";const C=c({__name:"ButtonPermission",setup(c){const{hasPermission:C,isBackendPermissionMode:R}=n(),M=r(),j=d(),{t:A}=u(),S=m((()=>j.getRoleList.includes(e.ADMIN))),w=m((()=>j.getRoleList.includes(e.USER)));function I(e){return t=this,s=null,a=function*(){const t=`${e}FakeToken`;j.setToken(t),yield j.getUserInfoAction(),yield M.changePermissionCode()},new Promise(((e,o)=>{var i=e=>{try{n(a.next(e))}catch(t){o(t)}},l=e=>{try{n(a.throw(e))}catch(t){o(t)}},n=t=>t.done?e(t.value):Promise.resolve(t.value).then(i,l);n((a=a.apply(t,s)).next())}));var t,s,a}return(n,r)=>{const d=t,u=s,c=a,m=o,j=i,N=_("auth");return x(),f(d,{title:g(A)("page.permission.pageTitles.button")},{default:y((()=>[T(l),T(d,{class:"my-4",title:g(A)("page.permission.currentCode"),embedded:"",bordered:!1},{default:y((()=>[v(k(g(M).getPermissionCodes),1)])),_:1},8,["title"]),T(u),T(c,{class:"mt-4",type:"info",title:g(A)("page.permission.backendLeftMenuChangeTitle"),"show-icon":""},null,8,["title"]),T(u),T(d,{class:"mt-4",title:g(A)("page.permission.backendPermissionSwitchTitle"),embedded:"",bordered:!1},{default:y((()=>[T(j,null,{default:y((()=>[T(m,{type:g(S)?"primary":"default",disabled:!g(R),onClick:r[0]||(r[0]=t=>I(g(e).ADMIN))},{default:y((()=>[v(k(g(e).ADMIN),1)])),_:1},8,["type","disabled"]),T(m,{type:g(w)?"primary":"default",disabled:!g(R),onClick:r[1]||(r[1]=t=>I(g(e).USER))},{default:y((()=>[v(k(g(e).USER),1)])),_:1},8,["type","disabled"])])),_:1})])),_:1},8,["title"]),g(R)?(x(),b(P,{key:0},[T(u,null,{default:y((()=>[v(k(g(A)("page.permission.componentWayTitle")),1)])),_:1}),T(p,{value:"1000"},{default:y((()=>[T(m,{type:"primary",class:"mx-4"},{default:y((()=>[v(k(g(A)("page.permission.codeButtonText",{code:"1000"})),1)])),_:1})])),_:1}),T(p,{value:"2000"},{default:y((()=>[T(m,{type:"success",class:"mx-4"},{default:y((()=>[v(k(g(A)("page.permission.codeButtonText",{code:"2000"})),1)])),_:1})])),_:1}),T(p,{value:["1000","2000"]},{default:y((()=>[T(m,{type:"error",class:"mx-4"},{default:y((()=>[v(k(g(A)("page.permission.codeButtonText",{code:["1000","2000"]})),1)])),_:1})])),_:1}),T(u,null,{default:y((()=>[v(k(g(A)("page.permission.functionWayTitle")),1)])),_:1}),g(C)("1000")?(x(),f(m,{key:0,type:"primary",class:"mx-4"},{default:y((()=>[v(k(g(A)("page.permission.codeButtonText",{code:"1000"})),1)])),_:1})):h("",!0),g(C)("2000")?(x(),f(m,{key:1,type:"success",class:"mx-4"},{default:y((()=>[v(k(g(A)("page.permission.codeButtonText",{code:"2000"})),1)])),_:1})):h("",!0),g(C)(["1000","2000"])?(x(),f(m,{key:2,type:"error",class:"mx-4"},{default:y((()=>[v(k(g(A)("page.permission.codeButtonText",{code:["1000","2000"]})),1)])),_:1})):h("",!0),T(u,null,{default:y((()=>[v(k(g(A)("page.permission.directiveWayTitle")),1)])),_:1}),B((x(),f(m,{type:"primary",class:"mx-4"},{default:y((()=>[v(k(g(A)("page.permission.codeButtonText",{code:"1000"})),1)])),_:1})),[[N,"1000"]]),B((x(),f(m,{type:"success",class:"mx-4"},{default:y((()=>[v(k(g(A)("page.permission.codeButtonText",{code:"2000"})),1)])),_:1})),[[N,"2000"]]),B((x(),f(m,{type:"error",class:"mx-4"},{default:y((()=>[v(k(g(A)("page.permission.codeButtonText",{code:["1000","2000"]})),1)])),_:1})),[[N,["1000","2000"]]])],64)):h("",!0)])),_:1},8,["title"])}}});export{C as default};
